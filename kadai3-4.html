<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="utf-8"> <!-- 「urf-8」→「utf-8」に直しました！ -->
        <title>演習課題3-4：自動販売機</title>
    </head>
    <body>
        <script>
            // 商品一覧を記録する連想配列の配列
            const items =  [
                { id: 1, name: "緑茶", price: 140, stock: 5 },
                { id: 2, name: "水", price: 100, stock: 14 },
                { id: 3, name: "オレンジジュース", price: 150, stock: 7 },
                { id: 4, name: "リンゴジュース", price: 150, stock: 9 },
                { id: 5, name: "炭酸水", price: 120, stock: 1 },
                { id: 6, name: "サイダー", price: 160, stock: 3 },
                { id: 7, name: "コーヒー", price: 170, stock: 8 },
                { id: 8, name: "紅茶", price: 140, stock: 6 }
            ];

            // 商品一覧の表示関数
            function showItemList() {
                console.log("商品は以下の" + items.length + "種類です。");
                for (let i = 0; i < items.length; i++) {
                    const item = items[i];
                    console.log(item.id + ": " + item.name + " " + item.price + "円 (在庫:" + item.stock + ")");
                }
                console.log(""); // 空行の出力
            }

            // 商品購入の関数
            function buyItem(no) {
                // 商品番号の範囲チェック
                if (no < 1 || no > items.length) {
                    console.log(no + "は無効な商品番号です。番号は1～" + items.length + "で指定してください。");
                    console.log(""); // 空行の出力
                    return;
                }

                const item = items[no - 1]; // 配列のインデックスは0からスタートなので-1
                if (item.stock > 0) {
                    item.stock--; // 在庫を1減らす
                    console.log(item.name + "を購入しました。");
                } else {
                    console.log(item.name + "は在庫切れです。");
                }

                showItemList(); // 購入後に最新の商品一覧を表示
            }

            showItemList(); // 最初の商品一覧の表示
            buyItem(3);      // オレンジジュースを購入
            buyItem(5);      // 炭酸水を購入
            buyItem(5);      // 炭酸水をもう一度購入（在庫切れのはず）
        </script>
    </body>
</html>
